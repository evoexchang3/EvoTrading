# ============================================
# TRADING PLATFORM - PRODUCTION ENVIRONMENT
# ============================================
# Production deployment on Ubuntu 24.04 LTS
# Copy to .env and configure with your actual values
# NEVER commit .env to version control

# ============================================
# DATABASE (REQUIRED)
# ============================================
# Neon PostgreSQL connection string
# Format: postgresql://username:password@host:port/database?sslmode=require
# Example: postgresql://user:pass@ep-cool-grass-123456.us-east-2.aws.neon.tech/neondb?sslmode=require
DATABASE_URL=postgresql://YOUR_USER:YOUR_PASSWORD@YOUR_NEON_HOST.neon.tech/YOUR_DATABASE?sslmode=require

# ============================================
# AUTHENTICATION (REQUIRED)
# ============================================
# JWT secrets for signing access and refresh tokens
# CRITICAL: Generate strong secrets and keep them secure
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_ACCESS_SECRET=CHANGE_ME_GENERATE_A_SECURE_32_BYTE_HEX_STRING
JWT_REFRESH_SECRET=CHANGE_ME_GENERATE_A_DIFFERENT_32_BYTE_HEX_STRING

# ============================================
# WEBHOOK INTEGRATION (REQUIRED)
# ============================================
# HMAC-SHA256 secret for signing webhooks to CRM
# Must match the secret configured in your CRM system
WEBHOOK_SECRET=CHANGE_ME_GENERATE_A_SECURE_32_BYTE_HEX_STRING

# CRM system base URL for webhook delivery
# Example: https://crm.yourdomain.com/api
CRM_BASE_URL=https://YOUR_CRM_DOMAIN/api

# Bearer token for authenticating with CRM service API
CRM_SERVICE_TOKEN=CHANGE_ME_GENERATE_A_SECURE_32_BYTE_HEX_STRING

# ============================================
# MARKET DATA PROVIDERS (OPTIONAL)
# ============================================
# Twelve Data API key for real-time market data
# Sign up at: https://twelvedata.com/
TWELVEDATA_API_KEY=YOUR_TWELVE_DATA_API_KEY

# Marketaux API key for financial news
# Sign up at: https://www.marketaux.com/
MARKETAUX_API_KEY=YOUR_MARKETAUX_API_KEY

# EODHD API key for economic calendar
# Sign up at: https://eodhd.com/
EODHD_API_KEY=YOUR_EODHD_API_KEY

# ============================================
# SERVER CONFIGURATION
# ============================================
# Port to bind the HTTP server (nginx will proxy to this)
# Default: 5000 (DO NOT use 80/443 - nginx handles that)
PORT=5000

# Environment mode - MUST be 'production' for production deployments
NODE_ENV=production

# Log output format: json (recommended for production monitoring)
LOG_FORMAT=json

# ============================================
# SECURITY CONFIGURATION (REQUIRED FOR PRODUCTION)
# ============================================
# CORS allowed origins (comma-separated list of your domains)
# Example: https://trading.yourdomain.com,https://www.yourdomain.com
# CRITICAL: Set this to your actual domain(s)
CORS_ALLOWED_ORIGINS=https://YOUR_DOMAIN.com

# Rate limiting - maximum requests per window (adjust based on your traffic)
RATE_LIMIT_MAX=100

# Rate limiting - time window in milliseconds (15 minutes)
RATE_LIMIT_WINDOW_MS=900000

# Webhook timestamp tolerance in seconds (replay attack prevention)
WEBHOOK_TOLERANCE_SEC=300

# ============================================
# OPTIONAL CONFIGURATION
# ============================================
# Custom site configuration path (if using custom branding)
# SITE_CONFIG_PATH=/var/www/trading-platform/site-config.yml

# Database migration safety (NEVER enable in production unless you know what you're doing)
# ALLOW_DESTRUCTIVE_MIGRATIONS=false
