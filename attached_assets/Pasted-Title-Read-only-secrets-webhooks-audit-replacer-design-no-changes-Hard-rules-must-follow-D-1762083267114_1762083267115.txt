Title: Read-only secrets & webhooks audit + replacer design (no changes)
Hard rules (must follow):
Do not create/modify/delete any files.
Do not open PRs, issues, or post to GitHub.
Do not generate code or command snippets.
Work in read-only mode and print a report only in this chat.
Objectives:
Identify every environment variable and every webhook used by the project.
Explain what each is for, where it is referenced, and whether it is required at boot.
Flag any hard-coded secrets or insecure defaults.
Design (spec only, no code) a safe replacer tool we can build later that:
Can audit current values without revealing them.
Can dry-run replacements from a provided source of truth.
Can apply replacements safely to a target secrets file only when explicitly requested.
Can optionally update approved non-code documentation files that contain literal webhook URLs.
Produces a clear rotation plan for sensitive keys (JWT/HMAC) that avoids downtime.
What to inspect (read-only):
Source for env usage (imports, process.env, config loaders).
Webhook handlers, outbound webhook calls, and any literal webhook URLs.
Auth token signing, HMAC verification, database connection, third-party APIs.
Any documentation or assets that may contain real secrets or webhook URLs.
Report structure (print exactly these sections, prose only):
Executive Summary — overall status (e.g., ready/nearly ready) and top risks.
Environment Variables Inventory — for each variable: name, purpose, required at boot (yes/no), where referenced (file + line ranges), default behavior if missing, security notes.
Webhooks Inventory — for each webhook: id/name, purpose, direction (inbound/outbound), source/target system, where configured (env vs literal), where referenced (file + line ranges), auth/verification used, operational notes.
Secrets Risk Review — locations of any hard-coded secrets or insecure defaults; recommend immediate mitigation (keep live values working; move to env later).
Replacer Tool — Functional Spec (no code) — describe the tool’s behavior and interfaces:
Modes: audit, dry-run, apply, explain.
Inputs: source of truth for new values; target secrets file; optional allow-list of non-code files that may contain literal webhook URLs.
Safeguards: no value printing by default; required-keys checks; backups; untouched unknown keys; never modify application source code; explicit consent for any non-secrets file updates.
Outputs: human-readable diff summary; per-key reason with references; success/failure statuses.
Rotation Guidance (procedural, no commands):
Dual-secret rollout for JWT/HMAC (old+new acceptance window, promotion order, safe removal timing).
Database credential rotation strategy.
Webhook secret rotation with external systems (tolerance windows, signature header validation).
Operational Playbook (conceptual, no commands): how we would use the replacer in practice to update secrets/webhooks without downtime, including prechecks and post-deployment verification steps.
Appendix — Evidence Map: list of files inspected and the specific lines/sections where each variable/webhook was found.
Acceptance criteria:
A single, clear text report following the structure above.
No files created, modified, or posted anywhere.
No code or command samples included—only descriptions and specifications.